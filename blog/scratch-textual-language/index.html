
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Scratch Textual Language - Polyglot</title>
  <meta name="author" content="Mark Fussell">

  
  <meta name="description" content="Scratch is a visual programming language, but it might usefully have a textual version as well.
Scratch in it&#8217;s graphical form can verify &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://markfussell.emenar.com/blog/scratch-textual-language/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Polyglot" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Polyglot</a></h1>
  
    <h2>Build Valuable Systems, Better and Faster</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:markfussell.emenar.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Scratch Textual Language</h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-17T20:28:00-07:00" pubdate data-updated="true">Sep 17<span>th</span>, 2008</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><a href="http://scratch.mit.edu/">Scratch</a> is a visual programming language, but it might usefully have a textual version as well.
Scratch in it&#8217;s graphical form can verify syntax intuitively &amp; automatically, and the resulting graphics are definitely beautiful, but it took quite some effort to produce
<a href="/blog/a-taste-of-scratch">these diagrams</a>
when trying to document a program, and it is even harder to reference sections of the diagram.</p>

<!-- more -->


<p>This activity came out of producing a Scratch Player in Flash, and I wanted to see whether the parse of the file produced the correct program.  A textual dump of the parse was an obvious solution, but then this &#8216;dump&#8217; might as well be the same as a complete program declaration so it was clearly &#8216;complete&#8217; and I wasn&#8217;t missing anything.</p>

<h2>Scratch Textual</h2>

<p>The core concepts in this proposed textual language for Scratch are:</p>

<ul>
<li><p>It should match Scratch as closely as possible</p></li>
<li><p>It should be a readable and easily writeable textual language (vs. XML as an interchange format)</p></li>
<li><p>It should be translatable to other human languages for the blocks (as Scratch is)</p></li>
<li><p>It should be really simple to produce and parse</p></li>
<li><p>Given Scratch is graphical, visual indentation is reasonable</p></li>
<li><p>It is not a complete &#8216;dump&#8217; of the Scratch project &#8211; no media resources are included.</p></li>
</ul>


<p>The above concepts produced the following initial choices:</p>

<ul>
<li><p>Different sections start with simple keywords: &#8220;stage:&#8221; and &#8220;sprite:&#8221; for the main objects, &#8220;vars:&#8221; and &#8216;listVars:&#8221; for declaring variables, &#8220;comment:&#8221; for a comment section, and &#8220;script:&#8221; for declaring a sequence of blocks.</p></li>
<li><p>Variables simply define their name and an initial value (if desired&#8230; otherwise it would be &#8216;0&#8217;)</p></li>
<li><p>Each block is written out textually with its &#8216;spec&#8217; &#8211; a human readable description of the block and its parameters</p></li>
<li><p>The parameters to a block (if any) come immediately after, and are preferably indented [say 4 spaces] from the block they are parameters too.  Note that the indentation is not necessary because you can tell the number of parameters from the block &#8216;spec&#8217;, but indenting makes it more readable.</p></li>
<li><p>If a block can contain other blocks, contained blocks <em>must be</em> indented [say 4 spaces] so you can tell they are inside the block vs. after the block.  This is in a fashion similar to Python.</p></li>
<li><p>There should be no blank line within a &#8216;script:&#8217; section.  The end of a script: section is the first blank (non-comment) line.</p></li>
<li><p>Comments within the textual blocks use &#8216;#&#8217; to match with Python.  Multi-line comments do not exist.  Note that Textual Comments are not parsed at all (and do not round-trip), so they should be minimal and merely augment parsing the textual source &#8211; use &#8216;comment:&#8217; for real documentation.</p></li>
<li><p>&#8216;script:&#8217; and &#8216;comment:&#8217; could have position information after them using the &#8216;loc&#8217; property (e.g. &#8220;loc = 500@250&#8221;) but this is not likely to be useful since any edits would cause positions to be wrong</p></li>
</ul>


<h3>An Example</h3>

<p>The following is a complete &#8220;normal expanded format&#8221; version.  See further below for a possible optimization to make things more vertically compressed.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
<span class='line-number'>191</span>
<span class='line-number'>192</span>
<span class='line-number'>193</span>
<span class='line-number'>194</span>
<span class='line-number'>195</span>
<span class='line-number'>196</span>
<span class='line-number'>197</span>
<span class='line-number'>198</span>
<span class='line-number'>199</span>
<span class='line-number'>200</span>
<span class='line-number'>201</span>
<span class='line-number'>202</span>
<span class='line-number'>203</span>
<span class='line-number'>204</span>
<span class='line-number'>205</span>
<span class='line-number'>206</span>
<span class='line-number'>207</span>
<span class='line-number'>208</span>
<span class='line-number'>209</span>
<span class='line-number'>210</span>
<span class='line-number'>211</span>
<span class='line-number'>212</span>
<span class='line-number'>213</span>
<span class='line-number'>214</span>
<span class='line-number'>215</span>
<span class='line-number'>216</span>
<span class='line-number'>217</span>
<span class='line-number'>218</span>
<span class='line-number'>219</span>
<span class='line-number'>220</span>
<span class='line-number'>221</span>
<span class='line-number'>222</span>
<span class='line-number'>223</span>
<span class='line-number'>224</span>
<span class='line-number'>225</span>
<span class='line-number'>226</span>
<span class='line-number'>227</span>
<span class='line-number'>228</span>
<span class='line-number'>229</span>
<span class='line-number'>230</span>
<span class='line-number'>231</span>
<span class='line-number'>232</span>
<span class='line-number'>233</span>
<span class='line-number'>234</span>
<span class='line-number'>235</span>
<span class='line-number'>236</span>
<span class='line-number'>237</span>
<span class='line-number'>238</span>
<span class='line-number'>239</span>
<span class='line-number'>240</span>
<span class='line-number'>241</span>
<span class='line-number'>242</span>
<span class='line-number'>243</span>
<span class='line-number'>244</span>
<span class='line-number'>245</span>
<span class='line-number'>246</span>
<span class='line-number'>247</span>
<span class='line-number'>248</span>
<span class='line-number'>249</span>
<span class='line-number'>250</span>
<span class='line-number'>251</span>
<span class='line-number'>252</span>
<span class='line-number'>253</span>
<span class='line-number'>254</span>
<span class='line-number'>255</span>
<span class='line-number'>256</span>
<span class='line-number'>257</span>
<span class='line-number'>258</span>
<span class='line-number'>259</span>
<span class='line-number'>260</span>
<span class='line-number'>261</span>
<span class='line-number'>262</span>
<span class='line-number'>263</span>
<span class='line-number'>264</span>
<span class='line-number'>265</span>
<span class='line-number'>266</span>
<span class='line-number'>267</span>
<span class='line-number'>268</span>
<span class='line-number'>269</span>
<span class='line-number'>270</span>
<span class='line-number'>271</span>
<span class='line-number'>272</span>
<span class='line-number'>273</span>
<span class='line-number'>274</span>
<span class='line-number'>275</span>
<span class='line-number'>276</span>
<span class='line-number'>277</span>
<span class='line-number'>278</span>
<span class='line-number'>279</span>
<span class='line-number'>280</span>
<span class='line-number'>281</span>
<span class='line-number'>282</span>
<span class='line-number'>283</span>
<span class='line-number'>284</span>
<span class='line-number'>285</span>
<span class='line-number'>286</span>
<span class='line-number'>287</span>
<span class='line-number'>288</span>
<span class='line-number'>289</span>
<span class='line-number'>290</span>
<span class='line-number'>291</span>
<span class='line-number'>292</span>
<span class='line-number'>293</span>
<span class='line-number'>294</span>
<span class='line-number'>295</span>
<span class='line-number'>296</span>
<span class='line-number'>297</span>
<span class='line-number'>298</span>
<span class='line-number'>299</span>
<span class='line-number'>300</span>
<span class='line-number'>301</span>
<span class='line-number'>302</span>
<span class='line-number'>303</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c">#===========================</span>
</span><span class='line'><span class="c">#=== Morph: Stage </span>
</span><span class='line'><span class="c">#===========================</span>
</span><span class='line'><span class="n">stage</span><span class="p">:</span> <span class="n">Stage</span>
</span><span class='line'>
</span><span class='line'><span class="c">#============</span>
</span><span class='line'><span class="c">#=== Vars </span>
</span><span class='line'><span class="c">#============</span>
</span><span class='line'>
</span><span class='line'><span class="nb">vars</span><span class="p">:</span>
</span><span class='line'><span class="n">talest</span><span class="o">-</span><span class="n">pole</span><span class="o">-</span><span class="n">height</span> <span class="o">=</span> <span class="mi">6</span>
</span><span class='line'><span class="n">previous</span><span class="o">-</span><span class="n">moved</span><span class="o">-</span><span class="n">disk</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'><span class="n">potential</span><span class="o">-</span><span class="n">disk</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'><span class="n">num</span><span class="o">-</span><span class="n">disks</span> <span class="o">=</span> <span class="mi">5</span>
</span><span class='line'><span class="nb">next</span><span class="o">-</span><span class="n">disk</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'><span class="n">base</span><span class="o">-</span><span class="n">disk</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'><span class="n">listVars</span><span class="p">:</span>
</span><span class='line'><span class="n">pole</span><span class="o">-</span><span class="mi">1</span> <span class="o">=</span> <span class="n">undefined</span>
</span><span class='line'><span class="n">pole</span><span class="o">-</span><span class="mi">2</span> <span class="o">=</span> <span class="n">undefined</span>
</span><span class='line'><span class="n">moveable</span><span class="o">-</span><span class="n">disks</span> <span class="o">=</span> <span class="n">undefined</span>
</span><span class='line'><span class="n">pole</span><span class="o">-</span><span class="mi">3</span> <span class="o">=</span> <span class="n">undefined</span>
</span><span class='line'>
</span><span class='line'><span class="c">#============</span>
</span><span class='line'><span class="c">#=== Script </span>
</span><span class='line'><span class="c">#============</span>
</span><span class='line'><span class="n">script</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'><span class="n">when</span> <span class="s">&#39;find-next-disk&#39;</span>
</span><span class='line'><span class="nb">set</span> <span class="nb">next</span><span class="o">-</span><span class="n">disk</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="mi">0</span>
</span><span class='line'><span class="n">broadcast</span> <span class="o">%</span><span class="n">e</span> <span class="ow">and</span> <span class="n">wait</span>
</span><span class='line'>    <span class="n">propose</span><span class="o">-</span><span class="nb">next</span><span class="o">-</span><span class="n">disk</span>
</span><span class='line'><span class="n">repeat</span> <span class="n">until</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>    <span class="o">%</span><span class="n">n</span> <span class="o">&gt;</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>        <span class="nb">next</span><span class="o">-</span><span class="n">disk</span>
</span><span class='line'>        <span class="mi">0</span>
</span><span class='line'>    <span class="nb">set</span> <span class="n">potential</span><span class="o">-</span><span class="n">disk</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="ow">not</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>            <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                <span class="n">potential</span><span class="o">-</span><span class="n">disk</span>
</span><span class='line'>                <span class="n">previous</span><span class="o">-</span><span class="n">moved</span><span class="o">-</span><span class="n">disk</span>
</span><span class='line'>        <span class="nb">set</span> <span class="nb">next</span><span class="o">-</span><span class="n">disk</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">potential</span><span class="o">-</span><span class="n">disk</span>
</span><span class='line'><span class="n">broadcast</span> <span class="o">%</span><span class="n">e</span> <span class="ow">and</span> <span class="n">wait</span>
</span><span class='line'>    <span class="n">move</span><span class="o">-</span><span class="nb">next</span><span class="o">-</span><span class="n">disk</span>
</span><span class='line'>
</span><span class='line'><span class="c">#============</span>
</span><span class='line'><span class="c">#=== Script </span>
</span><span class='line'><span class="c">#============</span>
</span><span class='line'><span class="n">script</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'><span class="n">when</span> <span class="s">&#39;Scratch-StartClicked&#39;</span>
</span><span class='line'><span class="nb">set</span> <span class="n">num</span><span class="o">-</span><span class="n">disks</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="mi">5</span>
</span><span class='line'><span class="nb">set</span> <span class="n">base</span><span class="o">-</span><span class="n">disk</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="o">%</span><span class="n">n</span> <span class="o">+</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>        <span class="n">num</span><span class="o">-</span><span class="n">disks</span>
</span><span class='line'>        <span class="mi">1</span>
</span><span class='line'><span class="nb">set</span> <span class="nb">next</span><span class="o">-</span><span class="n">disk</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="n">num</span><span class="o">-</span><span class="n">disks</span>
</span><span class='line'><span class="n">repeat</span> <span class="n">until</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>    <span class="o">%</span><span class="n">n</span> <span class="o">&lt;</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>        <span class="nb">next</span><span class="o">-</span><span class="n">disk</span>
</span><span class='line'>        <span class="mi">1</span>
</span><span class='line'>    <span class="nb">set</span> <span class="nb">next</span><span class="o">-</span><span class="n">disk</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">-</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="nb">next</span><span class="o">-</span><span class="n">disk</span>
</span><span class='line'>            <span class="mi">1</span>
</span><span class='line'><span class="n">broadcast</span> <span class="o">%</span><span class="n">e</span> <span class="ow">and</span> <span class="n">wait</span>
</span><span class='line'>    <span class="n">initialize</span>
</span><span class='line'><span class="nb">set</span> <span class="n">previous</span><span class="o">-</span><span class="n">moved</span><span class="o">-</span><span class="n">disk</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="mi">0</span>
</span><span class='line'><span class="nb">set</span> <span class="n">talest</span><span class="o">-</span><span class="n">pole</span><span class="o">-</span><span class="n">height</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="mi">0</span>
</span><span class='line'><span class="n">repeat</span> <span class="n">until</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>    <span class="o">%</span><span class="n">n</span> <span class="o">&gt;</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>        <span class="n">talest</span><span class="o">-</span><span class="n">pole</span><span class="o">-</span><span class="n">height</span>
</span><span class='line'>        <span class="n">num</span><span class="o">-</span><span class="n">disks</span>
</span><span class='line'>    <span class="n">broadcast</span> <span class="o">%</span><span class="n">e</span> <span class="ow">and</span> <span class="n">wait</span>
</span><span class='line'>        <span class="n">find</span><span class="o">-</span><span class="nb">next</span><span class="o">-</span><span class="n">disk</span>
</span><span class='line'>    <span class="nb">set</span> <span class="n">talest</span><span class="o">-</span><span class="n">pole</span><span class="o">-</span><span class="n">height</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">&gt;</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">talest</span><span class="o">-</span><span class="n">pole</span><span class="o">-</span><span class="n">height</span>
</span><span class='line'>        <span class="nb">set</span> <span class="n">talest</span><span class="o">-</span><span class="n">pole</span><span class="o">-</span><span class="n">height</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">#===========================</span>
</span><span class='line'><span class="c">#=== Morph: Sprite1 </span>
</span><span class='line'><span class="c">#===========================</span>
</span><span class='line'><span class="n">sprite</span><span class="p">:</span> <span class="n">Sprite1</span>
</span><span class='line'>
</span><span class='line'><span class="c">#============</span>
</span><span class='line'><span class="c">#=== Vars </span>
</span><span class='line'><span class="c">#============</span>
</span><span class='line'>
</span><span class='line'><span class="nb">vars</span><span class="p">:</span>
</span><span class='line'><span class="n">can</span><span class="o">-</span><span class="n">move</span> <span class="o">=</span> <span class="mi">3</span>
</span><span class='line'><span class="n">am</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">top</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'><span class="n">disk</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'><span class="n">pole</span> <span class="o">=</span> <span class="mi">3</span>
</span><span class='line'><span class="n">height</span> <span class="o">=</span> <span class="mi">6</span>
</span><span class='line'><span class="n">previous</span><span class="o">-</span><span class="n">pole</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'><span class="n">pole</span><span class="o">-</span><span class="n">at</span><span class="o">-</span><span class="n">start</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'><span class="c">#============</span>
</span><span class='line'><span class="c">#=== Script </span>
</span><span class='line'><span class="c">#============</span>
</span><span class='line'><span class="n">script</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'><span class="n">when</span> <span class="s">&#39;move-next-disk&#39;</span>
</span><span class='line'><span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>    <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>        <span class="n">disk</span><span class="o">-</span><span class="nb">id</span>
</span><span class='line'>        <span class="nb">next</span><span class="o">-</span><span class="n">disk</span>
</span><span class='line'>    <span class="nb">set</span> <span class="n">previous</span><span class="o">-</span><span class="n">moved</span><span class="o">-</span><span class="n">disk</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>        <span class="n">disk</span><span class="o">-</span><span class="nb">id</span>
</span><span class='line'>    <span class="nb">set</span> <span class="n">pole</span><span class="o">-</span><span class="n">at</span><span class="o">-</span><span class="n">start</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>        <span class="n">pole</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">b</span> <span class="ow">and</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>            <span class="ow">not</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>                <span class="o">%</span><span class="n">b</span> <span class="ow">or</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>                    <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                        <span class="n">previous</span><span class="o">-</span><span class="n">pole</span>
</span><span class='line'>                        <span class="mi">1</span>
</span><span class='line'>                    <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                        <span class="n">pole</span>
</span><span class='line'>                        <span class="mi">1</span>
</span><span class='line'>            <span class="o">%</span><span class="n">n</span> <span class="o">&lt;</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                <span class="n">disk</span><span class="o">-</span><span class="nb">id</span>
</span><span class='line'>        <span class="nb">set</span> <span class="n">pole</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="mi">1</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">b</span> <span class="ow">and</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>            <span class="ow">not</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>                <span class="o">%</span><span class="n">b</span> <span class="ow">or</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>                    <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                        <span class="n">previous</span><span class="o">-</span><span class="n">pole</span>
</span><span class='line'>                        <span class="mi">2</span>
</span><span class='line'>                    <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                        <span class="n">pole</span>
</span><span class='line'>                        <span class="mi">2</span>
</span><span class='line'>            <span class="o">%</span><span class="n">n</span> <span class="o">&lt;</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                <span class="n">disk</span><span class="o">-</span><span class="nb">id</span>
</span><span class='line'>        <span class="nb">set</span> <span class="n">pole</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="mi">2</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">b</span> <span class="ow">and</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>            <span class="ow">not</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>                <span class="o">%</span><span class="n">b</span> <span class="ow">or</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>                    <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                        <span class="n">previous</span><span class="o">-</span><span class="n">pole</span>
</span><span class='line'>                        <span class="mi">3</span>
</span><span class='line'>                    <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                        <span class="n">pole</span>
</span><span class='line'>                        <span class="mi">3</span>
</span><span class='line'>            <span class="o">%</span><span class="n">n</span> <span class="o">&lt;</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                <span class="n">disk</span><span class="o">-</span><span class="nb">id</span>
</span><span class='line'>        <span class="nb">set</span> <span class="n">pole</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="mi">3</span>
</span><span class='line'>    <span class="nb">set</span> <span class="n">previous</span><span class="o">-</span><span class="n">pole</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>        <span class="n">pole</span><span class="o">-</span><span class="n">at</span><span class="o">-</span><span class="n">start</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">previous</span><span class="o">-</span><span class="n">pole</span>
</span><span class='line'>            <span class="mi">1</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">previous</span><span class="o">-</span><span class="n">pole</span>
</span><span class='line'>            <span class="mi">2</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">previous</span><span class="o">-</span><span class="n">pole</span>
</span><span class='line'>            <span class="mi">3</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">pole</span>
</span><span class='line'>            <span class="mi">1</span>
</span><span class='line'>        <span class="nb">set</span> <span class="n">height</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">pole</span>
</span><span class='line'>            <span class="mi">2</span>
</span><span class='line'>        <span class="nb">set</span> <span class="n">height</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">pole</span>
</span><span class='line'>            <span class="mi">3</span>
</span><span class='line'>        <span class="nb">set</span> <span class="n">height</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>
</span><span class='line'><span class="c">#============</span>
</span><span class='line'><span class="c">#=== Script </span>
</span><span class='line'><span class="c">#============</span>
</span><span class='line'><span class="n">script</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'><span class="n">when</span> <span class="s">&#39;propose-next-disk&#39;</span>
</span><span class='line'><span class="nb">set</span> <span class="n">am</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">top</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="mi">0</span>
</span><span class='line'><span class="nb">set</span> <span class="n">can</span><span class="o">-</span><span class="n">move</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="mi">0</span>
</span><span class='line'><span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>    <span class="o">%</span><span class="n">b</span> <span class="ow">and</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">pole</span>
</span><span class='line'>            <span class="mi">1</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">disk</span><span class="o">-</span><span class="nb">id</span>
</span><span class='line'>    <span class="nb">set</span> <span class="n">am</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">top</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>        <span class="mi">1</span>
</span><span class='line'><span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>    <span class="o">%</span><span class="n">b</span> <span class="ow">and</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">pole</span>
</span><span class='line'>            <span class="mi">2</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">disk</span><span class="o">-</span><span class="nb">id</span>
</span><span class='line'>    <span class="nb">set</span> <span class="n">am</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">top</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>        <span class="mi">1</span>
</span><span class='line'><span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>    <span class="o">%</span><span class="n">b</span> <span class="ow">and</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">pole</span>
</span><span class='line'>            <span class="mi">3</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">disk</span><span class="o">-</span><span class="nb">id</span>
</span><span class='line'>    <span class="nb">set</span> <span class="n">am</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">top</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>        <span class="mi">1</span>
</span><span class='line'><span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>    <span class="o">%</span><span class="n">n</span> <span class="o">&gt;</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>        <span class="n">am</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">top</span>
</span><span class='line'>        <span class="mi">0</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">b</span> <span class="ow">and</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>            <span class="ow">not</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>                <span class="o">%</span><span class="n">b</span> <span class="ow">or</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>                    <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                        <span class="n">previous</span><span class="o">-</span><span class="n">pole</span>
</span><span class='line'>                        <span class="mi">1</span>
</span><span class='line'>                    <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                        <span class="n">pole</span>
</span><span class='line'>                        <span class="mi">1</span>
</span><span class='line'>            <span class="o">%</span><span class="n">n</span> <span class="o">&lt;</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                <span class="n">disk</span><span class="o">-</span><span class="nb">id</span>
</span><span class='line'>        <span class="nb">set</span> <span class="n">can</span><span class="o">-</span><span class="n">move</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="mi">1</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">b</span> <span class="ow">and</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>            <span class="ow">not</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>                <span class="o">%</span><span class="n">b</span> <span class="ow">or</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>                    <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                        <span class="n">previous</span><span class="o">-</span><span class="n">pole</span>
</span><span class='line'>                        <span class="mi">2</span>
</span><span class='line'>                    <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                        <span class="n">pole</span>
</span><span class='line'>                        <span class="mi">2</span>
</span><span class='line'>            <span class="o">%</span><span class="n">n</span> <span class="o">&lt;</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                <span class="n">disk</span><span class="o">-</span><span class="nb">id</span>
</span><span class='line'>        <span class="nb">set</span> <span class="n">can</span><span class="o">-</span><span class="n">move</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="mi">2</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">b</span> <span class="ow">and</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>            <span class="ow">not</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>                <span class="o">%</span><span class="n">b</span> <span class="ow">or</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>                    <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                        <span class="n">previous</span><span class="o">-</span><span class="n">pole</span>
</span><span class='line'>                        <span class="mi">3</span>
</span><span class='line'>                    <span class="o">%</span><span class="n">n</span> <span class="o">=</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                        <span class="n">pole</span>
</span><span class='line'>                        <span class="mi">3</span>
</span><span class='line'>            <span class="o">%</span><span class="n">n</span> <span class="o">&lt;</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>                <span class="n">disk</span><span class="o">-</span><span class="nb">id</span>
</span><span class='line'>        <span class="nb">set</span> <span class="n">can</span><span class="o">-</span><span class="n">move</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="mi">3</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">%</span><span class="n">b</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">&gt;</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">can</span><span class="o">-</span><span class="n">move</span>
</span><span class='line'>            <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'><span class="c">#============</span>
</span><span class='line'><span class="c">#=== Script </span>
</span><span class='line'><span class="c">#============</span>
</span><span class='line'><span class="n">script</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'><span class="n">when</span> <span class="s">&#39;initialize&#39;</span>
</span><span class='line'><span class="nb">set</span> <span class="n">disk</span><span class="o">-</span><span class="nb">id</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="mi">1</span>
</span><span class='line'><span class="nb">set</span> <span class="n">pole</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="mi">1</span>
</span><span class='line'><span class="nb">set</span> <span class="n">previous</span><span class="o">-</span><span class="n">pole</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="mi">0</span>
</span><span class='line'><span class="nb">set</span> <span class="n">can</span><span class="o">-</span><span class="n">move</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="mi">0</span>
</span><span class='line'><span class="nb">set</span> <span class="n">am</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">top</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="mi">0</span>
</span><span class='line'><span class="nb">set</span> <span class="n">height</span> <span class="n">to</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>    <span class="o">%</span><span class="n">n</span> <span class="o">+</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>        <span class="o">%</span><span class="n">n</span> <span class="o">-</span> <span class="o">%</span><span class="n">n</span>
</span><span class='line'>            <span class="n">base</span><span class="o">-</span><span class="n">disk</span>
</span><span class='line'>            <span class="n">disk</span><span class="o">-</span><span class="nb">id</span>
</span><span class='line'>        <span class="mi">1</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Vertical Compression</h3>

<p>The format above has every block on its own line.  This is readable and informative (you can see the argument types) but is vertically expansive.  Assuming parentheses or some other paired delimiter are not used for anything else in names, we could replace the argument placeholders with parentheses like below.  This gives a more lisp-like feel, at least for the inner evaluations.  If you leave one or more placeholders off, they would come from the next lines in &#8216;missing&#8217; order, kind of like a macro.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">script</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'><span class="n">when</span> <span class="s">&#39;find-next-disk&#39;</span>
</span><span class='line'><span class="nb">set</span> <span class="nb">next</span><span class="o">-</span><span class="n">disk</span> <span class="n">to</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'><span class="n">broadcast</span> <span class="p">(</span><span class="n">propose</span><span class="o">-</span><span class="nb">next</span><span class="o">-</span><span class="n">disk</span><span class="p">)</span> <span class="ow">and</span> <span class="n">wait</span>
</span><span class='line'><span class="n">repeat</span> <span class="n">until</span> <span class="p">((</span><span class="nb">next</span><span class="o">-</span><span class="n">disk</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">(</span><span class="mi">0</span><span class="p">))</span>
</span><span class='line'>    <span class="nb">set</span> <span class="n">potential</span><span class="o">-</span><span class="n">disk</span> <span class="n">to</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="p">(</span> <span class="p">(</span><span class="n">potential</span><span class="o">-</span><span class="n">disk</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">previous</span><span class="o">-</span><span class="n">moved</span><span class="o">-</span><span class="n">disk</span><span class="p">))</span> <span class="p">)</span>
</span><span class='line'>        <span class="nb">set</span> <span class="nb">next</span><span class="o">-</span><span class="n">disk</span> <span class="n">to</span> <span class="p">(</span><span class="n">potential</span><span class="o">-</span><span class="n">disk</span><span class="p">)</span>
</span><span class='line'><span class="n">broadcast</span> <span class="p">(</span><span class="n">move</span><span class="o">-</span><span class="nb">next</span><span class="o">-</span><span class="n">disk</span><span class="p">)</span> <span class="ow">and</span> <span class="n">wait</span>
</span></code></pre></td></tr></table></div></figure>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Mark Fussell</span></span>

      








  


<time datetime="2008-09-17T20:28:00-07:00" pubdate data-updated="true">Sep 17<span>th</span>, 2008</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/scratch/'>Scratch</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://markfussell.emenar.com/blog/scratch-textual-language/" data-via="" data-counturl="http://markfussell.emenar.com/blog/scratch-textual-language/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/a-taste-of-scratch/" title="Previous Post: A Taste of Scratch">&laquo; A Taste of Scratch</a>
      
      
        <a class="basic-alignment right" href="/blog/scratchonflash/" title="Next Post: Scratch on Flash">Scratch on Flash &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>
      <a href="http://www.linkedin.com/in/markfussell/">Linked In</a>
      &bull;
      <a href="http://github.com/markfussell/">Github</a>
      &bull;
      <a href="http://palobots.org/">PaloBots</a>
  </p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/add2-1/">Advanced Development and Delivery (ADD) and the ADD Stack  Summary</a>
      </li>
    
      <li class="post">
        <a href="/blog/addstack-10/">ADD Stack [Part-10]</a>
      </li>
    
      <li class="post">
        <a href="/blog/addstack-9/">ADD Stack [Part-9]</a>
      </li>
    
      <li class="post">
        <a href="/blog/addstack-8/">ADD Stack [Part-8]</a>
      </li>
    
      <li class="post">
        <a href="/blog/addstack-7/">ADD Stack [Part-7]</a>
      </li>
    
  </ul>
</section>
<section>
    <h1>Categories</h1>
    <span id="category-list"><a href='/blog/categories/add' style='font-size: 148.88888888888889%'>ADD</a> <a href='/blog/categories/agile' style='font-size: 102.22222222222223%'>Agile</a> <a href='/blog/categories/automation' style='font-size: 153.33333333333334%'>Automation</a> <a href='/blog/categories/cloud' style='font-size: 155.55555555555554%'>Cloud</a> <a href='/blog/categories/database' style='font-size: 104.44444444444444%'>Database</a> <a href='/blog/categories/dylan' style='font-size: 102.22222222222223%'>Dylan</a> <a href='/blog/categories/dynamic' style='font-size: 115.55555555555556%'>Dynamic</a> <a href='/blog/categories/ephemeral' style='font-size: 102.22222222222223%'>Ephemeral</a> <a href='/blog/categories/flex' style='font-size: 115.55555555555556%'>Flex</a> <a href='/blog/categories/git' style='font-size: 160.0%'>Git</a> <a href='/blog/categories/grails' style='font-size: 124.44444444444444%'>Grails</a> <a href='/blog/categories/guideline' style='font-size: 102.22222222222223%'>Guideline</a> <a href='/blog/categories/it' style='font-size: 155.55555555555554%'>IT</a> <a href='/blog/categories/java' style='font-size: 111.11111111111111%'>Java</a> <a href='/blog/categories/ooad' style='font-size: 102.22222222222223%'>OOAD</a> <a href='/blog/categories/oopsla' style='font-size: 102.22222222222223%'>OOPSLA</a> <a href='/blog/categories/rails' style='font-size: 104.44444444444444%'>Rails</a> <a href='/blog/categories/relational' style='font-size: 104.44444444444444%'>Relational</a> <a href='/blog/categories/ruby' style='font-size: 133.33333333333334%'>Ruby</a> <a href='/blog/categories/rubyshoes' style='font-size: 108.88888888888889%'>RubyShoes</a> <a href='/blog/categories/scratch' style='font-size: 106.66666666666667%'>Scratch</a> <a href='/blog/categories/smalltalk' style='font-size: 137.77777777777777%'>Smalltalk</a> <a href='/blog/categories/stack' style='font-size: 124.44444444444444%'>Stack</a> <a href='/blog/categories/virtualization' style='font-size: 102.22222222222223%'>Virtualization</a> </span>
</section>
<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/markfussell">@markfussell</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'markfussell',
            count: 6,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Mark Fussell -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'markfussell';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://markfussell.emenar.com/blog/scratch-textual-language/';
        var disqus_url = 'http://markfussell.emenar.com/blog/scratch-textual-language/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
